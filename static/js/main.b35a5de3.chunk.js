(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{36:function(e,t,n){e.exports={h3:"Footer_h3__2C_8G",link:"Footer_link__9_ojg",MoveUpInitial:"Footer_MoveUpInitial__2K9ot",MoveUpEnd:"Footer_MoveUpEnd__2aVnP"}},46:function(e,t,n){e.exports={root:"Header_root__jsaeH",MoveUpInitial:"Header_MoveUpInitial__120BZ",MoveUpEnd:"Header_MoveUpEnd__zsMY2"}},54:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var c,s,r=n(1),a=n.n(r),i=n(28),o=n.n(i),j=(n(54),n(6)),l=n(10),d=n(19),u=n(24),b=n(5),h=n(73),O=Object(h.a)("STORIES_LATEST_ADD"),m=Object(h.a)("STORY_ADD"),x=Object(h.a)("LOADING_STATUS_CHANGE"),f=Object(h.a)("BRANCH_STATUS_SET"),p=Object(h.a)("BRANCH_STATUS_CHANGE"),v=n(11),k=n(37),S="https://hacker-news.firebaseio.com/v0/",N=function(){var e=Object(l.a)(Object(j.a)().mark((function e(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(S,"newstories.json?print=pretty")).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e){return k.a.get("".concat(S,"item/").concat(e,".json?print=pretty")).then((function(e){return e.data})).catch((function(e){console.log(e)}))},g=n(2),_=function(){return Object(g.jsx)("article",{className:"story-preview",children:Object(g.jsxs)("div",{className:"skeleton-item",children:[Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"skeleton-block",style:{maxWidth:"500px"},children:" "})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{className:"skeleton-block",style:{maxWidth:"50px"},children:" "}),Object(g.jsx)("div",{className:"skeleton-block",style:{maxWidth:"100px"},children:" "}),Object(g.jsx)("div",{className:"skeleton-block",style:{maxWidth:"100px"},children:" "}),Object(g.jsx)("div",{className:"skeleton-block",style:{maxWidth:"100px"},children:" "})]})]})})},B=function(e){var t=6e4,n=36e5,c=864e5,s=2592e6,r=31536e6,a=new Date-new Date(1e3*e);return a<t?Math.round(a/1e3)+" seconds ago":a<n?Math.round(a/t)+" minutes ago":a<c?Math.round(a/n)+" hours ago":a<s?Math.round(a/c)+" days ago":a<r?Math.round(a/s)+" months ago":Math.round(a/r)+" years ago"},w=function(e){var t=e.id,n=Object(r.useState)({}),c=Object(v.a)(n,2),s=c[0],a=c[1],i=Object(r.useState)("fetching"),o=Object(v.a)(i,2),d=o[0],b=o[1];return Object(r.useEffect)((function(){b("fetching");var e=function(){var e=Object(l.a)(Object(j.a)().mark((function e(){var n;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(){return b("finished")}))}),[t]),s&&"fetching"!==d?Object(g.jsxs)("article",{className:"story-preview",children:[Object(g.jsx)(u.b,{className:"link",to:"/".concat(s.id),children:s.title}),Object(g.jsxs)("section",{className:"story-info",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Score:"})," ",s.score]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"By:"})," ",s.by]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Posted:"})," ",B(s.time)]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Comments:"})," ",s.descendants]})]})]}):Object(g.jsx)(_,{})},E=n(25),I=n.n(E),T={addLatestStories:O},D=Object(d.b)((function(e){return{stories:e.stories,ui:e.ui}}),T)((function(e){var t=e.stories,n=e.addLatestStories,c=Object(r.useState)(59),s=Object(v.a)(c,2),a=s[0],i=s[1];Object(r.useEffect)((function(){var e;return a>0?e=setTimeout((function(){return i(a-1)}),1e3):o().then((function(){return i(59)})),function(){clearTimeout(e)}}),[i,a]);var o=function(){var e=Object(l.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,n({latestStoriesIDs:t.slice(0,100)}),i(59);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("main",{children:[Object(g.jsx)("h2",{children:"LATEST NEWS"}),Object(g.jsx)("div",{className:"refresh-btn-wrapper",children:Object(g.jsx)("button",{className:"button button-animated",onClick:o,children:Object(g.jsx)("span",{children:Object(g.jsxs)("span",{children:["Refresh ",a]})})})}),Object(g.jsx)("section",{className:"stories-list",children:t.latestStoriesIDs.map((function(e){return Object(g.jsx)(I.a,{placeholder:Object(g.jsx)(_,{}),offset:300,children:Object(g.jsx)(w,{id:e},e)},e)}))})]})})),M=n(15),A=n(16),C={changeBranchStatus:p},H=Object(d.b)((function(e){return{ui:e.ui}}),C)((function e(t){var n=t.commentID,c=t.changeBranchStatus,s=t.ui,a=Object(r.useState)([]),i=Object(v.a)(a,2),o=i[0],d=i[1],u=Object(r.useState)({}),b=Object(v.a)(u,2),h=b[0],O=b[1],m=Object(r.useState)("finished"),x=Object(v.a)(m,2),f=x[0],p=x[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("fetching"),e.next=3,y(n);case 3:if(t=e.sent,O(t),t&&t.kids&&s.commentBranch[t.id]&&"closed"!==s.commentBranch[t.id]){e.next=7;break}return e.abrupt("return");case 7:d(t.kids);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(){return p("finished")}))}),[n,s]);var k=!s.commentBranch[h.id]||"closed"===s.commentBranch[h.id],S="fetching"===f;return h&&Object(g.jsxs)("article",{className:"comment",children:[Object(g.jsx)("div",{className:"comment-info",children:h.by?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{children:"By: "}),h.by,Object(g.jsx)("span",{children:" Posted: "}),B(h.time)]}):Object(g.jsx)("div",{className:"skeleton-block skeleton-block-header",style:{maxWidth:"300px"},children:" "})}),h.deleted?Object(g.jsx)("h4",{children:"[commentary deleted]"}):h.text?Object(g.jsx)("div",{className:"comment-text",dangerouslySetInnerHTML:{__html:h.text}}):Object(g.jsxs)("div",{className:"comment-text",children:[Object(g.jsx)("div",{className:"skeleton-block",children:" "}),Object(g.jsx)("div",{className:"skeleton-block",children:" "}),Object(g.jsx)("div",{className:"skeleton-block",children:" "})]}),h.kids?Object(g.jsx)("button",{className:"button button-animated button-comment",onClick:function(){var e=s.commentBranch[h.id]&&"closed"!==s.commentBranch[h.id]?"closed":"opened";sessionStorage.setItem("branchesStatus",JSON.stringify(Object(A.a)(Object(A.a)({},s.commentBranch),{},Object(M.a)({},h.id,e)))),c({id:h.id,status:e})},disabled:S,children:Object(g.jsx)("span",{children:Object(g.jsx)("span",{children:k?"Show branch":"Hide branch"})})}):Object(g.jsx)("button",{className:"button btn-disabled",disabled:!0,children:"expand branch"}),function(){if(0!==h.kids&&0!==o.length&&s)return s.commentBranch[h.id]&&"opened"===s.commentBranch[h.id]?o.map((function(t){return Object(g.jsx)(I.a,{children:Object(g.jsx)(e,{commentID:t,changeBranchStatus:c,ui:s},t)},t)})):void 0}()]})})),U=function(e){var t,n=e.match.params.id,c=Object(r.useState)({}),s=Object(v.a)(c,2),a=s[0],i=s[1],o=Object(r.useState)([]),d=Object(v.a)(o,2),u=d[0],b=d[1],h=Object(r.useState)(59),O=Object(v.a)(h,2),m=O[0],x=O[1];Object(r.useEffect)((function(){var e;return m>0?e=setTimeout((function(){return x(m-1)}),1e3):f().then((function(){return x(59)})),function(){clearTimeout(e)}}),[x,m]),Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n);case 2:(t=e.sent).kids&&b(t.kids),i(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[n,b]);var f=function(){var e=Object(l.a)(Object(j.a)().mark((function e(){var t;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(n);case 2:(t=e.sent).kids&&b(t.kids),i(t),x(59);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a&&Object(g.jsx)("main",{children:Object(g.jsxs)("article",{children:[a.title?Object(g.jsxs)("h2",{children:[a.title," (",Object(g.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"nav-link link-source",href:a.url,children:"SOURCE"}),")"]}):Object(g.jsx)("div",{className:"skeleton-item justify-center",children:Object(g.jsx)("div",{className:"skeleton-block skeleton-block-title",style:{maxWidth:"500px"},children:" "})}),a.by?Object(g.jsxs)("section",{className:"story-info justify-center",children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Score:"})," ",a.score]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"By:"})," ",a.by]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{children:"Posted:"})," ",B(a.time)]})]}):Object(g.jsxs)("div",{className:"skeleton-item justify-center",children:[Object(g.jsx)("div",{className:"skeleton-block skeleton-block-info",style:{maxWidth:"50px"},children:" "}),Object(g.jsx)("div",{className:"skeleton-block skeleton-block-info",style:{maxWidth:"100px"},children:" "}),Object(g.jsx)("div",{className:"skeleton-block skeleton-block-info",style:{maxWidth:"150px"},children:" "})]}),Object(g.jsxs)("div",{className:"comments-header",children:[Object(g.jsx)("div",{className:"comment-counter-wrapper",children:Object(g.jsxs)("span",{children:["Comments: ",null!==(t=a.descendants)&&void 0!==t?t:0]})}),Object(g.jsx)("button",{className:"button button-animated",onClick:f,children:Object(g.jsx)("span",{children:Object(g.jsxs)("span",{children:["Refresh ",m]})})})]}),Object(g.jsx)("section",{className:"comments-list",children:u.length>0?u.map((function(e){return Object(g.jsx)(I.a,{placeholder:Object(g.jsx)(_,{}),children:Object(g.jsx)(H,{commentID:e},e)},e)})):Object(g.jsx)("h3",{className:"h3",children:"No comments"})})]})})},W=n(46),L=n.n(W),R=function(){return Object(g.jsxs)("header",{children:[Object(g.jsx)("h1",{children:"HACKER NEWS"}),Object(g.jsx)(u.b,{to:"/",className:L.a.root,children:"POSTS"})]})},F=n(36),P=n.n(F),G=function(){return Object(g.jsxs)("footer",{children:[Object(g.jsx)("h3",{className:P.a.h3,children:"Hacker News"}),Object(g.jsx)("div",{children:Object(g.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:P.a.link,href:"https://github.com/homie43",children:"homie43 production"})})]})},J={addLatestStories:O,addStory:m,setBranchStatus:f},K=Object(d.b)((function(e){return{stories:e.stories}}),J)((function(e){var t=e.addLatestStories,n=e.addStory,c=e.setBranchStatus;return Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(j.a)().mark((function e(){var n,s;return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:n=e.sent,t({latestStoriesIDs:n.slice(0,100)}),s=JSON.parse(sessionStorage.getItem("branchesStatus")),c({commentBranch:null!==s&&void 0!==s?s:{}});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().then((function(){}))}),[t,n,c]),Object(g.jsxs)(u.a,{basename:"/",children:[Object(g.jsx)(R,{}),Object(g.jsxs)(b.c,{children:[Object(g.jsx)(b.a,{path:"/",exact:!0,component:D}),Object(g.jsx)(b.a,{path:"/:id",component:U})]}),Object(g.jsx)(G,{})]})})),Y=n(71),z=n(72),V=Object(z.a)((c={},Object(M.a)(c,O,(function(e,t){return{latestStoriesIDs:t.payload.latestStoriesIDs,stories:e.stories}})),Object(M.a)(c,m,(function(e,t){return{latestStoriesIDs:e.latestStoriesIDs,stories:t.payload.stories}})),c),{latestStoriesIDs:[],stories:[]}),Z=Object(z.a)((s={},Object(M.a)(s,x,(function(e,t){return{commentBranch:e.commentBranch,loadingStatus:t.payload.loadingStatus}})),Object(M.a)(s,p,(function(e,t){var n=e.commentBranch,c=e.loadingStatus,s=t.payload,r=s.id,a=s.status;return{loadingStatus:c,commentBranch:Object(A.a)(Object(A.a)({},n),{},Object(M.a)({},r,a))}})),Object(M.a)(s,f,(function(e,t){return{loadingStatus:e.loadingStatus,commentBranch:t.payload.commentBranch}})),s),{loadingStatus:"loading",commentBranch:{}}),q=Object(Y.a)({stories:V,ui:Z}),Q=Object(Y.b)(q);o.a.render(Object(g.jsx)(d.a,{store:Q,children:Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(K,{})})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.b35a5de3.chunk.js.map